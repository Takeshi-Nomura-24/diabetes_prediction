{% extends 'base.html' %}
{% load static %}

{% block main %}
<div class='container mt-1 mt-md-2 mb-4'>
    <div class='row g-3 g-md-4 justify-content-center'>
        
        <div class='col-lg-5 col-md-6 order-1'>
            <div class='card shadow-sm border-0 overflow-hidden rounded-4'>
                <div class='card-header bg-primary text-white py-3 border-0'>
                    <h4 class='mb-0 h5 d-flex align-items-center justify-content-center fw-bold'>
                        <i class="bi bi-pencil-square me-2"></i> ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿å…¥åŠ›
                    </h4>
                </div>
                <div class='card-body p-3 p-md-4'>
                    <form method='post' id='predict-form' novalidate>
                        {% csrf_token %}
                        
                        <div class="row">
                            {% for field in form %}
                            <div class='col-12 mb-3'>
                                <label for='{{ field.id_for_label }}' class='form-label fw-bold text-dark small d-flex align-items-center mb-1'>
                                    {{ field.label }}
                                    {% if field.field.required %}
                                        <span class="badge bg-danger ms-2" style="font-size: 0.6rem; padding: 0.3em 0.5em;">å¿…é ˆ</span>
                                    {% endif %}
                                </label>
                                {{ field }}
                                
                                {% if field.errors %}
                                    <div class='invalid-feedback d-block animate-shake'>
                                        {{ field.errors.0 }}
                                    </div>
                                {% endif %}
                                {% if field.help_text %}
                                    <div class="form-text tiny text-muted"><i class="bi bi-info-circle"></i> {{ field.help_text }}</div>
                                {% endif %}
                            </div>
                            {% endfor %}
                        </div>

                        <div class='d-grid gap-2 mt-4'>
                            <button type='submit' id='submit-btn' class='btn btn-warning btn-lg fw-bold shadow-sm py-3 transition-all rounded-pill'>
                                <span id="btn-text">ğŸ” åˆ¤å®šã‚’å®Ÿè¡Œ</span>
                                <span id="btn-spinner" class="spinner-border spinner-border-sm d-none ms-2" role="status" aria-hidden="true"></span>
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
        
        <div class='col-lg-7 col-md-6 order-2'>
            <div class='card shadow-sm border-0 rounded-4'>
                <div class='card-header bg-info text-white py-3 border-0'>
                    <h4 class='mb-0 h5 d-flex align-items-center justify-content-center fw-bold'>
                        <i class="bi bi-lightbulb me-2"></i> ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®è§£èª¬
                    </h4>
                </div>
                <div class='card-body p-3 p-md-4'>
                    <p class="text-muted small mb-3">å…¥åŠ›é …ç›®ãŒAIãƒ¢ãƒ‡ãƒ«ã®åˆ¤å®šã«ã©ã†å½±éŸ¿ã™ã‚‹ã‹è§£èª¬ã—ã¾ã™ã€‚</p>
                    
                    <div class='accordion accordion-flush rounded-3 border overflow-hidden' id='accordionExample'>
                        
                        <div class='accordion-item'>
                            <h2 class='accordion-header'>
                                <button class='accordion-button collapsed fw-bold py-3' type='button' data-bs-toggle='collapse' data-bs-target='#collapseOne'>
                                    <i class="bi bi-person-heart text-danger me-2"></i> å¦Šå¨ ã¨ç³–å°¿ç—…ã®é–¢ä¿‚
                                </button>
                            </h2>
                            <div id='collapseOne' class='accordion-collapse collapse' data-bs-parent='#accordionExample'>
                                <div class='accordion-body text-secondary lh-base small'>
                                    å¦Šå¨ ä¸­ã®ç³–ä»£è¬ç•°å¸¸ã¯å°†æ¥çš„ãªç³–å°¿ç—…ç™ºç—‡ã®ãƒªã‚¹ã‚¯å› å­ã§ã™ã€‚éå»ã®å¦Šå¨ å›æ•°ã¯ãã®ç´¯ç©çš„ãªå½±éŸ¿ã‚’è€ƒæ…®ã™ã‚‹ãŸã‚ã«ä½¿ç”¨ã•ã‚Œã¾ã™ã€‚
                                </div>
                            </div>
                        </div>

                        <div class='accordion-item'>
                            <h2 class='accordion-header'>
                                <button class='accordion-button collapsed fw-bold py-3' type='button' data-bs-toggle='collapse' data-bs-target='#collapseTwo'>
                                    <i class="bi bi-droplet-fill text-primary me-2"></i> ã‚°ãƒ«ã‚³ãƒ¼ã‚¹ã¨è¡€ç³–å€¤
                                </button>
                            </h2>
                            <div id='collapseTwo' class='accordion-collapse collapse' data-bs-parent='#accordionExample'>
                                <div class='accordion-body text-secondary lh-base small'>
                                    è¡€æ¶²ä¸­ã®ãƒ–ãƒ‰ã‚¦ç³–æ¿ƒåº¦ã‚’æŒ‡ã—ã¾ã™ã€‚AIãƒ¢ãƒ‡ãƒ«ã«ãŠã„ã¦æœ€ã‚‚é‡è¦åº¦ãŒé«˜ã„é …ç›®ã®ä¸€ã¤ã§ã™ã€‚é«˜ã„æ•°å€¤ã¯ã‚¤ãƒ³ã‚¹ãƒªãƒ³ã®åƒããŒä¸ååˆ†ã§ã‚ã‚‹ã“ã¨ã‚’ç¤ºå”†ã—ã¾ã™ã€‚
                                </div>
                            </div>
                        </div>

                        <div class='accordion-item'>
                            <h2 class='accordion-header'>
                                <button class='accordion-button collapsed fw-bold py-3' type='button' data-bs-toggle='collapse' data-bs-target='#collapseThree'>
                                    <i class="bi bi-heart-pulse-fill text-danger me-2"></i> è¡€åœ§ã¨ç³–å°¿ç—…ã®é–¢ä¿‚
                                </button>
                            </h2>
                            <div id='collapseThree' class='accordion-collapse collapse' data-bs-parent='#accordionExample'>
                                <div class='accordion-body text-secondary lh-base small'>
                                    é«˜è¡€åœ§ã¯ç³–å°¿ç—…ã®åˆä½µç—‡ãƒªã‚¹ã‚¯ã‚’é«˜ã‚ã‚‹ã ã‘ã§ãªãã€ã‚¤ãƒ³ã‚¹ãƒªãƒ³æŠµæŠ—æ€§ã‚’æ‚ªåŒ–ã•ã›ã‚‹è¦å› ã«ã‚‚ãªã‚Šã¾ã™ã€‚
                                </div>
                            </div>
                        </div>

                        <div class='accordion-item'>
                            <h2 class='accordion-header'>
                                <button class='accordion-button collapsed fw-bold py-3' type='button' data-bs-toggle='collapse' data-bs-target='#collapseSix'>
                                    <i class="bi bi-speedometer2 text-success me-2"></i> BMIã¨ç³–å°¿ç—…
                                </button>
                            </h2>
                            <div id='collapseSix' class='accordion-collapse collapse' data-bs-parent='#accordionExample'>
                                <div class='accordion-body text-secondary lh-base small'>
                                    è‚¥æº€åº¦ã¯ã‚¤ãƒ³ã‚¹ãƒªãƒ³æŠµæŠ—æ€§ã¨å¯†æ¥ã«é–¢ä¿‚ã—ã¦ã„ã¾ã™ã€‚BMIãŒ25ã‚’è¶…ãˆã‚‹ã¨ãƒªã‚¹ã‚¯ãŒé«˜ã¾ã‚Šã¾ã™ãŒã€AIã¯ç·åˆçš„ã«åˆ¤æ–­ã—ã¾ã™ã€‚
                                </div>
                            </div>
                        </div>

                    </div>
                    
                    <div class="mt-4 p-3 bg-light rounded-3 border-start border-4 border-info">
                        <p class="tiny text-muted mb-0">
                            <i class="bi bi-exclamation-triangle-fill text-warning"></i> 
                            <strong>ã”æ³¨æ„:</strong> æœ¬åˆ¤å®šã¯ç‰¹å®šã®ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã«åŸºã¥ãAIãƒ¢ãƒ‡ãƒ«ã«ã‚ˆã‚‹æ¨è«–ã§ã‚ã‚Šã€åŒ»å­¦çš„è¨ºæ–­ã«ä»£ã‚ã‚‹ã‚‚ã®ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚
                        </p>
                    </div>
                </div>
            </div>
        </div>

    </div>
</div>

<script>
    document.getElementById('predict-form').onsubmit = function() {
        const btn = document.getElementById('submit-btn');
        const text = document.getElementById('btn-text');
        const spinner = document.getElementById('btn-spinner');
        
        btn.classList.add('disabled');
        btn.style.opacity = '0.8';
        text.innerText = 'AIè§£æä¸­...';
        spinner.classList.remove('d-none');
    };
</script>

<style>
    .transition-all { transition: all 0.3s ease; }
    .btn-warning:hover { transform: translateY(-2px); box-shadow: 0 5px 15px rgba(0,0,0,0.1) !important; }
    .accordion-button:not(.collapsed) { background-color: #f8f9fa; color: #0d6efd; }
    .tiny { font-size: 0.7rem; }
    
    @keyframes shake {
        0%, 100% { transform: translateX(0); }
        25% { transform: translateX(-5px); }
        75% { transform: translateX(5px); }
    }
    .animate-shake { animation: shake 0.2s ease-in-out 0s 2; }
</style>
{% endblock %}